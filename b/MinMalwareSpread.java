import java.util.Arrays;

public class MinMalwareSpread {
    private static int MAXN=301;
    private static int [] father=new int[MAXN];
    private static int [] cnts=new int[MAXN];
    private static int[] sizes=new int[MAXN];
    private static boolean[] virus = new boolean[MAXN];
    private static int[] infect=new int[MAXN];
    public static void build(int n,int [] initial){
        for (int i = 0; i < n; i++) {
            father[i]=i;
            sizes[i]=1;
            virus[i]=false;
            infect[i]=-1;
            cnts[i]=0;
        }
        for (int x:initial) {
            virus[x]=true;
        }
    }
    public static int find(int x){
        if (father[x]!=x){
            father[x]=find(father[x]);
        }
        return father[x];
    }
    public static void union(int x,int y){
        int fx=find(x);
        int fy=find(y);
        if (fx!=fy){
            father[fy]=fx;
            sizes[fx]+=sizes[fy];
        }
    }
    public int minMalwareSpread(int[][] graph,int[] initial){
        int n=graph.length;
        build(n,initial);
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                if (!virus[i] && !virus[j] && graph[i][j]==1){
                    union(i,j);
                }
            }
        }
        for (int x : initial) {
            for (int i = 0; i < n; i++) {
                if (i!=x && !virus[i] && graph[x][i]==1){
                    int fa=find(i);
                    if (infect[fa]==-1){
                        infect[fa]=x;
                    }else if (infect[fa]!=x && infect[fa]!=-2){
                        infect[fa]=-2;
                    }
                }
            }
        }
        for (int i = 0; i < n; i++) {
            if (i==find(i) && infect[i]>=0){
                cnts[infect[i]]+=sizes[i];
            }
        }
        Arrays.sort(initial);
        int ans = initial[0];
        int max = cnts[ans];
        for (int i : initial) {
            if (cnts[i] > max) {
                ans = i;
                max = cnts[i];
            }
        }
        return ans;
    }
}
